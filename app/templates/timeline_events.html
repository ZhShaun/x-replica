{# app/templates/timeline_events.html #}
{% for message in messages %}
<div class="tweet-card card mb-3 rounded-3 shadow-sm">
    <div class="card-body">
        <h6 class="card-subtitle mb-1 text-primary">@{{ message.user_name }}</h6>
        <p class="card-text mb-2">{{ message.user_message }}</p>
        <p class="card-text text-muted small text-end">{{ message.created_at }}</p>
    </div>
</div>
{% endfor %}

{# This div is the "load more" trigger for HTMX infinite scroll #}
{% if has_more %}
<div id="load-more-trigger"
     hx-get="/timeline-events?offset={{ next_offset }}"
     hx-trigger="revealed"
     hx-swap="outerHTML"
     hx-target="#load-more-trigger"
     hx-indicator="#timeline-loading-indicator"
     class="text-center my-4">
    <div class="spinner-border text-primary" role="status" id="timeline-loading-indicator" style="display:none;">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p class="text-muted small mt-2">Loading more messages...</p>
</div>
{% endif %}
{# app/templates/timeline_events.html #}
{% for message in messages %}
<div class="tweet-card card mb-3 rounded-3 shadow-sm">
    <div class="card-body">
        <h6 class="card-subtitle mb-1 text-primary">@{{ message.user_name }}</h6>
        <p class="card-text mb-2">{{ message.user_message }}</p>
        <p class="card-text text-muted small text-end">{{ message.created_at }}</p>
    </div>
</div>
{% endfor %}

{# This div is the "load more" trigger for HTMX infinite scroll #}
{% if has_more %}
<div id="load-more-trigger"
     hx-get="/timeline-events?offset={{ next_offset }}"
     hx-trigger="revealed"
     hx-swap="outerHTML"
     hx-target="#load-more-trigger"
     hx-indicator="#timeline-loading-indicator"
     class="text-center my-4">
    <div class="spinner-border text-primary" role="status" id="timeline-loading-indicator" style="display:none;">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p class="text-muted small mt-2">Loading more messages...</p>
</div>
{% endif %}
